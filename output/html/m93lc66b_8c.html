<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Matriz_3a: D:/Documentos/Proyectos/MPLABXPic/Matriz_1/Matriz_3a.X/m93lc66b.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Matriz_3a
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_275089585c7fc1b5fd5d7d42c69cb1da.html">D:</a></li><li class="navelem"><a class="el" href="dir_0a15cee1de17d9175539557a1b7c24fa.html">Documentos</a></li><li class="navelem"><a class="el" href="dir_6fb0c6de73ebd1c912e1294b94a47638.html">Proyectos</a></li><li class="navelem"><a class="el" href="dir_88ab38d80be61e05cd009b1bea99bb0b.html">MPLABXPic</a></li><li class="navelem"><a class="el" href="dir_e58b7112985ee6bc0673a20bbbb01f03.html">Matriz_1</a></li><li class="navelem"><a class="el" href="dir_13df509c2e2b9f0301b062db03c497d7.html">Matriz_3a.X</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">m93lc66b.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="m93lc66b_8h_source.html">m93lc66b.h</a>&quot;</code><br />
</div>
<p><a href="m93lc66b_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acae7a1af193c5af70ced4bef543b562a" id="r_acae7a1af193c5af70ced4bef543b562a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acae7a1af193c5af70ced4bef543b562a">init_93lc66b</a> (void)</td></tr>
<tr class="memdesc:acae7a1af193c5af70ced4bef543b562a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inicializa la EEPROM 93LC66B y configura los pines del microcontrolador.  <br /></td></tr>
<tr class="separator:acae7a1af193c5af70ced4bef543b562a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a357fcffcb5e0b353f9c41a2d17a09404" id="r_a357fcffcb5e0b353f9c41a2d17a09404"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a357fcffcb5e0b353f9c41a2d17a09404">shiftIn16</a> ()</td></tr>
<tr class="memdesc:a357fcffcb5e0b353f9c41a2d17a09404"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lee 16 bits de datos desde un dispositivo externo utilizando un protocolo de desplazamiento.  <br /></td></tr>
<tr class="separator:a357fcffcb5e0b353f9c41a2d17a09404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56aed808a19595c19e58b5eecb06c226" id="r_a56aed808a19595c19e58b5eecb06c226"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a56aed808a19595c19e58b5eecb06c226">startBit</a> (void)</td></tr>
<tr class="memdesc:a56aed808a19595c19e58b5eecb06c226"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera la secuencia de bits de inicio para la comunicación con la EEPROM 93LC66B.  <br /></td></tr>
<tr class="separator:a56aed808a19595c19e58b5eecb06c226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89cde20fab96b16e0f65e3b70c7682a3" id="r_a89cde20fab96b16e0f65e3b70c7682a3"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89cde20fab96b16e0f65e3b70c7682a3">leeMemoria</a> ()</td></tr>
<tr class="memdesc:a89cde20fab96b16e0f65e3b70c7682a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lee 16 bits de datos desde la EEPROM 93LC66B.  <br /></td></tr>
<tr class="separator:a89cde20fab96b16e0f65e3b70c7682a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a774b55ccddfc4a5e7ccbf9a6d7a67871" id="r_a774b55ccddfc4a5e7ccbf9a6d7a67871"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a774b55ccddfc4a5e7ccbf9a6d7a67871">bitRead</a> (unsigned int data, unsigned char numeroBit)</td></tr>
<tr class="memdesc:a774b55ccddfc4a5e7ccbf9a6d7a67871"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lee el valor de un bit específico dentro de un dato de 16 bits.  <br /></td></tr>
<tr class="separator:a774b55ccddfc4a5e7ccbf9a6d7a67871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8372911edb0b562a6839c72fdbe6c04a" id="r_a8372911edb0b562a6839c72fdbe6c04a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8372911edb0b562a6839c72fdbe6c04a">escribe</a> (unsigned int dato, unsigned char contador)</td></tr>
<tr class="memdesc:a8372911edb0b562a6839c72fdbe6c04a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escribe una secuencia de bits en un dispositivo externo utilizando un protocolo de desplazamiento.  <br /></td></tr>
<tr class="separator:a8372911edb0b562a6839c72fdbe6c04a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bf5b635188103bfa35c8d6905dd25cf" id="r_a5bf5b635188103bfa35c8d6905dd25cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5bf5b635188103bfa35c8d6905dd25cf">leeAutomatico</a> (unsigned int inicio, int alcance)</td></tr>
<tr class="memdesc:a5bf5b635188103bfa35c8d6905dd25cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lee un rango de direcciones de la EEPROM 93LC66B de forma automática.  <br /></td></tr>
<tr class="separator:a5bf5b635188103bfa35c8d6905dd25cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a0f79bb2ebee4a3da56cd1f790f3240" id="r_a6a0f79bb2ebee4a3da56cd1f790f3240"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a0f79bb2ebee4a3da56cd1f790f3240">lee93LC66B</a> (unsigned int direccion)</td></tr>
<tr class="memdesc:a6a0f79bb2ebee4a3da56cd1f790f3240"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lee una palabra de 16 bits desde una dirección específica de la EEPROM 93LC66B.  <br /></td></tr>
<tr class="separator:a6a0f79bb2ebee4a3da56cd1f790f3240"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a774b55ccddfc4a5e7ccbf9a6d7a67871" name="a774b55ccddfc4a5e7ccbf9a6d7a67871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a774b55ccddfc4a5e7ccbf9a6d7a67871">&#9670;&#160;</a></span>bitRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char bitRead </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char</td>          <td class="paramname"><span class="paramname"><em>numeroBit</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lee el valor de un bit específico dentro de un dato de 16 bits. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Dato de 16 bits del cual se leerá el bit. </td></tr>
    <tr><td class="paramname">numeroBit</td><td>Número del bit que se desea leer (0 para el bit menos significativo, 15 para el más significativo).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>numeroBit</code> debe estar dentro del rango válido de 0 a 15.</dd></dl>
<p>Esta función extrae el valor de un bit específico dentro de un dato de 16 bits. Utiliza un desplazamiento a la derecha (<code>&gt;&gt;</code>) para mover el bit deseado a la posición menos significativa y luego una máscara AND (<code>&amp; 0x01</code>) para obtener su valor (0 o 1).</p>
<dl class="section return"><dt>Returns</dt><dd>Un valor de tipo <code>unsigned char</code> que representa el valor del bit leído (0 o 1).</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myData = 0xABCD; <span class="comment">// Dato de ejemplo</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bit5 = <a class="code hl_function" href="#a774b55ccddfc4a5e7ccbf9a6d7a67871">bitRead</a>(myData, 5); <span class="comment">// Lee el bit 5 (sexto bit desde la derecha)</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bit15 = <a class="code hl_function" href="#a774b55ccddfc4a5e7ccbf9a6d7a67871">bitRead</a>(myData, 15); <span class="comment">// Lee el bit 15 (bit más significativo)</span></div>
<div class="ttc" id="am93lc66b_8c_html_a774b55ccddfc4a5e7ccbf9a6d7a67871"><div class="ttname"><a href="#a774b55ccddfc4a5e7ccbf9a6d7a67871">bitRead</a></div><div class="ttdeci">unsigned char bitRead(unsigned int data, unsigned char numeroBit)</div><div class="ttdoc">Lee el valor de un bit específico dentro de un dato de 16 bits.</div><div class="ttdef"><b>Definition</b> <a href="m93lc66b_8c_source.html#l00058">m93lc66b.c:58</a></div></div>
</div><!-- fragment --><dl class="section remark"><dt>Remarks</dt><dd>Es importante asegurarse de que el valor de <code>numeroBit</code> esté dentro del rango válido (0-15) para evitar comportamientos indefinidos. </dd></dl>

<p class="definition">Definition at line <a class="el" href="m93lc66b_8c_source.html#l00058">58</a> of file <a class="el" href="m93lc66b_8c_source.html">m93lc66b.c</a>.</p>

</div>
</div>
<a id="a8372911edb0b562a6839c72fdbe6c04a" name="a8372911edb0b562a6839c72fdbe6c04a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8372911edb0b562a6839c72fdbe6c04a">&#9670;&#160;</a></span>escribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void escribe </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>dato</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char</td>          <td class="paramname"><span class="paramname"><em>contador</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escribe una secuencia de bits en un dispositivo externo utilizando un protocolo de desplazamiento. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dato</td><td>Dato de 16 bits que se va a escribir. </td></tr>
    <tr><td class="paramname">contador</td><td>Número de bits que se van a escribir.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>Los pines SK (reloj) y DI (datos de entrada) deben estar configurados como salidas. <code>contador</code> debe estar dentro del rango de 1 a 16.</dd></dl>
<p>Esta función escribe una secuencia de bits desde la variable <code>dato</code> al pin <code>DI</code>, sincronizada con la señal de reloj <code>SK</code>. El número de bits que se escriben está determinado por el parámetro <code>contador</code>. El proceso es el siguiente:</p><ol type="1">
<li>Se itera mientras <code>contador</code> sea mayor que 0.</li>
<li>En cada iteración: a. Se espera 1 microsegundo. b. Se lee el bit correspondiente de <code>dato</code> usando la función <code><a class="el" href="m93lc66b_8h.html#a774b55ccddfc4a5e7ccbf9a6d7a67871" title="Lee el valor de un bit específico dentro de un dato de 16 bits.">bitRead()</a></code> y se escribe en el pin <code>DI</code>. El bit que se lee está determinado por <code>(contador - 1)</code>. c. Se espera 1 microsegundo. d. Se genera un flanco de subida en <code>SK</code> (SK pasa a 1). e. Se espera 1 microsegundo. f. Se genera un flanco de bajada en <code>SK</code> (SK pasa a 0). g. Se espera 1 microsegundo. h. Se decrementa <code>contador</code>.</li>
<li>Después del bucle, se pone <code>DI</code> a 0.</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataToWrite = 0x1234;</div>
<div class="line"><a class="code hl_function" href="#a8372911edb0b562a6839c72fdbe6c04a">escribe</a>(dataToWrite, 8); <span class="comment">// Escribe los 8 bits menos significativos de dataToWrite.</span></div>
<div class="line"><a class="code hl_function" href="#a8372911edb0b562a6839c72fdbe6c04a">escribe</a>(dataToWrite, 16); <span class="comment">// Escribe los 16 bits de dataToWrite.</span></div>
<div class="ttc" id="am93lc66b_8c_html_a8372911edb0b562a6839c72fdbe6c04a"><div class="ttname"><a href="#a8372911edb0b562a6839c72fdbe6c04a">escribe</a></div><div class="ttdeci">void escribe(unsigned int dato, unsigned char contador)</div><div class="ttdoc">Escribe una secuencia de bits en un dispositivo externo utilizando un protocolo de desplazamiento.</div><div class="ttdef"><b>Definition</b> <a href="m93lc66b_8c_source.html#l00066">m93lc66b.c:66</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>La precisión de los retardos depende de la frecuencia del oscilador del microcontrolador. Asegúrese de que la macro <code>__delay_us()</code> esté configurada correctamente para su configuración de hardware.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Es fundamental que el dispositivo externo esté configurado para recibir datos con este mismo protocolo de desplazamiento. Consultar la hoja de datos del dispositivo externo para obtener información precisa sobre los tiempos y el protocolo de comunicación. El último paso de poner <code>DI</code> a 0 podría no ser necesario dependiendo del protocolo específico del dispositivo. </dd></dl>

<p class="definition">Definition at line <a class="el" href="m93lc66b_8c_source.html#l00066">66</a> of file <a class="el" href="m93lc66b_8c_source.html">m93lc66b.c</a>.</p>

</div>
</div>
<a id="acae7a1af193c5af70ced4bef543b562a" name="acae7a1af193c5af70ced4bef543b562a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acae7a1af193c5af70ced4bef543b562a">&#9670;&#160;</a></span>init_93lc66b()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_93lc66b </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inicializa la EEPROM 93LC66B y configura los pines del microcontrolador. </p>
<dl class="section pre"><dt>Precondition</dt><dd>Ninguna.</dd></dl>
<p>Esta función configura los pines del microcontrolador para la comunicación con la EEPROM 93LC66B. Configura los pines RA0 (CS), RA1 (CLK) y RA2 (DI) como salidas, y el pin RA3 (DO) como entrada. Además, deshabilita los comparadores analógicos configurando el registro CMCON.</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="#acae7a1af193c5af70ced4bef543b562a">init_93lc66b</a>(); <span class="comment">// Inicializa la EEPROM 93LC66B</span></div>
<div class="ttc" id="am93lc66b_8c_html_acae7a1af193c5af70ced4bef543b562a"><div class="ttname"><a href="#acae7a1af193c5af70ced4bef543b562a">init_93lc66b</a></div><div class="ttdeci">void init_93lc66b(void)</div><div class="ttdoc">Inicializa la EEPROM 93LC66B y configura los pines del microcontrolador.</div><div class="ttdef"><b>Definition</b> <a href="m93lc66b_8c_source.html#l00003">m93lc66b.c:3</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Es crucial que los pines del microcontrolador se configuren correctamente para evitar conflictos y asegurar una comunicación adecuada con la EEPROM.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>La configuración <code>CMCON = 0x07</code> deshabilita los comparadores analógicos en el PIC. Si necesitas usar los comparadores, deberás modificar esta configuración y asegurarte de que no interfieran con la comunicación con la EEPROM. </dd></dl>

<p class="definition">Definition at line <a class="el" href="m93lc66b_8c_source.html#l00003">3</a> of file <a class="el" href="m93lc66b_8c_source.html">m93lc66b.c</a>.</p>

</div>
</div>
<a id="a6a0f79bb2ebee4a3da56cd1f790f3240" name="a6a0f79bb2ebee4a3da56cd1f790f3240"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a0f79bb2ebee4a3da56cd1f790f3240">&#9670;&#160;</a></span>lee93LC66B()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lee93LC66B </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>direccion</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lee una palabra de 16 bits desde una dirección específica de la EEPROM 93LC66B. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">direccion</td><td>Dirección de memoria de la EEPROM desde la que se leerá la palabra.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>Los pines CS, SK y DO deben estar configurados correctamente. La EEPROM debe haber sido inicializada correctamente con la función <code><a class="el" href="m93lc66b_8h.html#acae7a1af193c5af70ced4bef543b562a" title="Inicializa la EEPROM 93LC66B y configura los pines del microcontrolador.">init_93lc66b()</a></code>. <code>OPcode_Lectura</code> debe estar definido con el código de operación correcto para la lectura. <code>direccion</code> debe ser una dirección válida dentro del rango de la EEPROM.</dd></dl>
<p>Esta función realiza una lectura de una palabra de 16 bits desde una dirección específica de la EEPROM 93LC66B. El proceso es el siguiente:</p><ol type="1">
<li>Se genera la secuencia de inicio con <code><a class="el" href="m93lc66b_8h.html#a56aed808a19595c19e58b5eecb06c226" title="Genera la secuencia de bits de inicio para la comunicación con la EEPROM 93LC66B.">startBit()</a></code>.</li>
<li>Se escribe el código de operación de lectura (<code>OPcode_Lectura</code>) utilizando la función <code><a class="el" href="m93lc66b_8h.html#a8372911edb0b562a6839c72fdbe6c04a" title="Escribe una secuencia de bits en un dispositivo externo utilizando un protocolo de desplazamiento.">escribe()</a></code>. Se escriben 2 bits para el código de operación.</li>
<li>Se escribe la dirección de memoria (<code>direccion</code>) utilizando la función <code><a class="el" href="m93lc66b_8h.html#a8372911edb0b562a6839c72fdbe6c04a" title="Escribe una secuencia de bits en un dispositivo externo utilizando un protocolo de desplazamiento.">escribe()</a></code>. Se escriben 9 bits para la dirección.</li>
<li>Se leen los datos de la EEPROM utilizando la función <code><a class="el" href="m93lc66b_8h.html#a89cde20fab96b16e0f65e3b70c7682a3" title="Lee 16 bits de datos desde la EEPROM 93LC66B.">leeMemoria()</a></code> y se guardan en la variable <code>data</code>.</li>
<li>Se espera 10 milisegundos.</li>
<li>Se asegura que el pin <code>SK</code> esté en bajo.</li>
<li>Se espera 1 microsegundo.</li>
<li>Se pone el pin <code>DI</code> a bajo.</li>
<li>Se retorna el valor leído (<code>data</code>).</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>Un valor entero sin signo de 16 bits (<code>unsigned int</code>) que contiene la palabra leída desde la EEPROM.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataRead = <a class="code hl_function" href="#a6a0f79bb2ebee4a3da56cd1f790f3240">lee93LC66B</a>(0x0A); <span class="comment">// Lee la palabra en la dirección 0x0A.</span></div>
<div class="ttc" id="am93lc66b_8c_html_a6a0f79bb2ebee4a3da56cd1f790f3240"><div class="ttname"><a href="#a6a0f79bb2ebee4a3da56cd1f790f3240">lee93LC66B</a></div><div class="ttdeci">unsigned int lee93LC66B(unsigned int direccion)</div><div class="ttdoc">Lee una palabra de 16 bits desde una dirección específica de la EEPROM 93LC66B.</div><div class="ttdef"><b>Definition</b> <a href="m93lc66b_8c_source.html#l00110">m93lc66b.c:110</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>La precisión de los retardos depende de la frecuencia del oscilador del microcontrolador. Asegúrese de que las macros <code>__delay_ms()</code> y <code>__delay_us()</code> estén configuradas correctamente para su configuración de hardware.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Consultar la hoja de datos de la 93LC66B para obtener información precisa sobre el protocolo de comunicación completo, incluyendo los tiempos de acceso y los códigos de operación. El código asume que la EEPROM está configurada para palabras de 16 bits. </dd></dl>

<p class="definition">Definition at line <a class="el" href="m93lc66b_8c_source.html#l00110">110</a> of file <a class="el" href="m93lc66b_8c_source.html">m93lc66b.c</a>.</p>

</div>
</div>
<a id="a5bf5b635188103bfa35c8d6905dd25cf" name="a5bf5b635188103bfa35c8d6905dd25cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bf5b635188103bfa35c8d6905dd25cf">&#9670;&#160;</a></span>leeAutomatico()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void leeAutomatico </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>inicio</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>alcance</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lee un rango de direcciones de la EEPROM 93LC66B de forma automática. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inicio</td><td>Dirección de inicio de la lectura. </td></tr>
    <tr><td class="paramname">alcance</td><td>Dirección final de la lectura.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>Los pines CS, SK y DO deben estar configurados correctamente. La EEPROM debe haber sido inicializada correctamente con la función <code><a class="el" href="m93lc66b_8h.html#acae7a1af193c5af70ced4bef543b562a" title="Inicializa la EEPROM 93LC66B y configura los pines del microcontrolador.">init_93lc66b()</a></code>. <code>OPcode_Lectura</code> debe estar definido con el código de operación correcto para la lectura. <code>inicio</code> y <code>alcance</code> deben ser direcciones válidas dentro del rango de la EEPROM. <code>alcance</code> debe ser mayor o igual a <code>inicio</code>.</dd></dl>
<p>Esta función lee un rango de direcciones consecutivas de la EEPROM 93LC66B. El proceso es el siguiente:</p><ol type="1">
<li>Se inicializa la variable <code>direccion</code> con el valor de <code>inicio</code>.</li>
<li>Se genera la secuencia de inicio con <code><a class="el" href="m93lc66b_8h.html#a56aed808a19595c19e58b5eecb06c226" title="Genera la secuencia de bits de inicio para la comunicación con la EEPROM 93LC66B.">startBit()</a></code>.</li>
<li>Se escribe el código de operación de lectura (<code>OPcode_Lectura</code>) con <code><a class="el" href="m93lc66b_8h.html#a8372911edb0b562a6839c72fdbe6c04a" title="Escribe una secuencia de bits en un dispositivo externo utilizando un protocolo de desplazamiento.">escribe()</a></code>. Se escriben 2 bits para el código de operación.</li>
<li>Se escribe la dirección de inicio (<code>direccion</code>) con <code><a class="el" href="m93lc66b_8h.html#a8372911edb0b562a6839c72fdbe6c04a" title="Escribe una secuencia de bits en un dispositivo externo utilizando un protocolo de desplazamiento.">escribe()</a></code>. Se escriben 9 bits para la dirección.</li>
<li>Se verifica si <code>alcance</code> es mayor que <code>direccion</code>.</li>
<li>Si <code>alcance</code> es mayor que <code>direccion</code> (lectura de un rango): a. Se entra en un bucle <code>while</code> que se ejecuta mientras <code>direccion</code> sea menor o igual a <code>alcance</code>. b. Dentro del bucle: i. Se lee el dato de la dirección actual con <code><a class="el" href="m93lc66b_8h.html#a89cde20fab96b16e0f65e3b70c7682a3" title="Lee 16 bits de datos desde la EEPROM 93LC66B.">leeMemoria()</a></code> y se guarda en <code>Buf</code>. ii. Se espera 10 milisegundos. iii. Se asegura que <code>SK</code> esté en bajo. iv. Se espera 1 microsegundo. v. Se pone <code>DI</code> a 0. vi. Se incrementa <code>direccion</code>.</li>
<li>Si <code>alcance</code> no es mayor que <code>direccion</code> (lectura de una sola dirección, lo cual es un caso que no debería ocurrir dado que se espera que alcance sea mayor o igual a inicio): a. Se lee el dato de la dirección actual con <code><a class="el" href="m93lc66b_8h.html#a89cde20fab96b16e0f65e3b70c7682a3" title="Lee 16 bits de datos desde la EEPROM 93LC66B.">leeMemoria()</a></code> y se guarda en <code>Buf</code>. b. Se espera 10 milisegundos. c. Se asegura que <code>SK</code> esté en bajo. d. Se espera 1 microsegundo. e. Se pone <code>DI</code> a 0.</li>
</ol>
<div class="fragment"><div class="line"><a class="code hl_function" href="#a5bf5b635188103bfa35c8d6905dd25cf">leeAutomatico</a>(0x00, 0x0F); <span class="comment">// Lee desde la dirección 0x00 hasta la 0x0F.</span></div>
<div class="ttc" id="am93lc66b_8c_html_a5bf5b635188103bfa35c8d6905dd25cf"><div class="ttname"><a href="#a5bf5b635188103bfa35c8d6905dd25cf">leeAutomatico</a></div><div class="ttdeci">void leeAutomatico(unsigned int inicio, int alcance)</div><div class="ttdoc">Lee un rango de direcciones de la EEPROM 93LC66B de forma automática.</div><div class="ttdef"><b>Definition</b> <a href="m93lc66b_8c_source.html#l00083">m93lc66b.c:83</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>La precisión de los retardos depende de la frecuencia del oscilador del microcontrolador. Asegúrese de que las macros <code>__delay_ms()</code> y <code>__delay_us()</code> estén configuradas correctamente para su configuración de hardware. <code>Buf</code> debe ser una variable global o accesible dentro del ámbito de esta función.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Es fundamental que el valor de <code>alcance</code> sea mayor o igual a <code>inicio</code>. De lo contrario, el comportamiento no será el esperado. Consultar la hoja de datos de la 93LC66B para obtener información precisa sobre el protocolo de comunicación completo. El código asume que la EEPROM está configurada para palabras de 16 bits. </dd></dl>

<p class="definition">Definition at line <a class="el" href="m93lc66b_8c_source.html#l00083">83</a> of file <a class="el" href="m93lc66b_8c_source.html">m93lc66b.c</a>.</p>

</div>
</div>
<a id="a89cde20fab96b16e0f65e3b70c7682a3" name="a89cde20fab96b16e0f65e3b70c7682a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89cde20fab96b16e0f65e3b70c7682a3">&#9670;&#160;</a></span>leeMemoria()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int leeMemoria </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lee 16 bits de datos desde la EEPROM 93LC66B. </p>
<dl class="section pre"><dt>Precondition</dt><dd>Los pines CS, SK y DO deben estar configurados correctamente. La EEPROM debe haber sido inicializada correctamente con la función <code><a class="el" href="m93lc66b_8h.html#acae7a1af193c5af70ced4bef543b562a" title="Inicializa la EEPROM 93LC66B y configura los pines del microcontrolador.">init_93lc66b()</a></code>. Se debe haber enviado previamente el código de operación y la dirección de lectura.</dd></dl>
<p>Esta función lee 16 bits de datos desde la EEPROM 93LC66B utilizando la función <code><a class="el" href="m93lc66b_8h.html#a357fcffcb5e0b353f9c41a2d17a09404" title="Lee 16 bits de datos desde un dispositivo externo utilizando un protocolo de desplazamiento.">shiftIn16()</a></code>. El valor leído se almacena en la variable <code>Buffer</code> y se retorna.</p>
<dl class="section return"><dt>Returns</dt><dd>Un valor entero sin signo de 16 bits (<code>unsigned int</code>) que contiene los datos leídos desde la EEPROM.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> data = <a class="code hl_function" href="#a89cde20fab96b16e0f65e3b70c7682a3">leeMemoria</a>(); <span class="comment">// Lee 16 bits de datos desde la EEPROM.</span></div>
<div class="ttc" id="am93lc66b_8c_html_a89cde20fab96b16e0f65e3b70c7682a3"><div class="ttname"><a href="#a89cde20fab96b16e0f65e3b70c7682a3">leeMemoria</a></div><div class="ttdeci">unsigned int leeMemoria()</div><div class="ttdoc">Lee 16 bits de datos desde la EEPROM 93LC66B.</div><div class="ttdef"><b>Definition</b> <a href="m93lc66b_8c_source.html#l00049">m93lc66b.c:49</a></div></div>
</div><!-- fragment --><dl class="section remark"><dt>Remarks</dt><dd>Esta función asume que ya se ha enviado el código de operación de lectura y la dirección a la EEPROM. Consultar la hoja de datos de la 93LC66B para obtener información sobre el protocolo de comunicación completo. El código comentado <code>//Buffer = (Buffer &gt;&gt; 8) | (Buffer &lt;&lt; 8);</code> se ha eliminado porque no se utiliza. Si se necesitara invertir el orden de los bytes, se debería volver a incluir y documentar adecuadamente. </dd></dl>

<p class="definition">Definition at line <a class="el" href="m93lc66b_8c_source.html#l00049">49</a> of file <a class="el" href="m93lc66b_8c_source.html">m93lc66b.c</a>.</p>

</div>
</div>
<a id="a357fcffcb5e0b353f9c41a2d17a09404" name="a357fcffcb5e0b353f9c41a2d17a09404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a357fcffcb5e0b353f9c41a2d17a09404">&#9670;&#160;</a></span>shiftIn16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int shiftIn16 </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lee 16 bits de datos desde un dispositivo externo utilizando un protocolo de desplazamiento. </p>
<p>/** </p>
<dl class="section pre"><dt>Precondition</dt><dd>Los pines SK (reloj) y DO (datos de entrada) deben estar configurados correctamente. El dispositivo externo debe estar enviando los datos sincronizados con la señal de reloj.</dd></dl>
<p>Esta función implementa un protocolo de desplazamiento para leer 16 bits de datos desde un dispositivo externo. Funciona de la siguiente manera:</p><ol type="1">
<li>Se inicializa una variable <code>myDataIn</code> a 0 para almacenar los datos recibidos.</li>
<li>Se itera 16 veces (para leer 16 bits).</li>
<li>En cada iteración: a. Se pone el pin SK (reloj) a bajo. b. Se espera 1 microsegundo. c. Se lee el estado del pin DO (datos de entrada) y se guarda en la variable <code>temp</code>. d. Si <code>temp</code> es 1, se establece el bit correspondiente en <code>myDataIn</code> usando un OR bit a bit y un desplazamiento a la izquierda. e. Se pone el pin SK (reloj) a alto.</li>
<li>Finalmente, se retorna el valor de <code>myDataIn</code>, que contiene los 16 bits leídos.</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>Un valor entero sin signo de 16 bits (<code>unsigned int</code>) que contiene los datos leídos.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> receivedData = <a class="code hl_function" href="#a357fcffcb5e0b353f9c41a2d17a09404">shiftIn16</a>(); <span class="comment">// Lee 16 bits de datos.</span></div>
<div class="ttc" id="am93lc66b_8c_html_a357fcffcb5e0b353f9c41a2d17a09404"><div class="ttname"><a href="#a357fcffcb5e0b353f9c41a2d17a09404">shiftIn16</a></div><div class="ttdeci">unsigned int shiftIn16()</div><div class="ttdoc">Lee 16 bits de datos desde un dispositivo externo utilizando un protocolo de desplazamiento.</div><div class="ttdef"><b>Definition</b> <a href="m93lc66b_8c_source.html#l00012">m93lc66b.c:12</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>La precisión del retardo depende de la frecuencia del oscilador del microcontrolador. Asegúrese de que la macro <code>__delay_us()</code> esté configurada correctamente para su configuración de hardware.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Es crucial que el dispositivo externo genere una señal de reloj y datos compatible con este protocolo de lectura. Consultar la hoja de datos del dispositivo externo para obtener información precisa sobre los tiempos y el protocolo de comunicación. La variable <code>pinState</code> no es necesaria y puede ser eliminada para optimizar el código. </dd></dl>

<p class="definition">Definition at line <a class="el" href="m93lc66b_8c_source.html#l00012">12</a> of file <a class="el" href="m93lc66b_8c_source.html">m93lc66b.c</a>.</p>

</div>
</div>
<a id="a56aed808a19595c19e58b5eecb06c226" name="a56aed808a19595c19e58b5eecb06c226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56aed808a19595c19e58b5eecb06c226">&#9670;&#160;</a></span>startBit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startBit </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera la secuencia de bits de inicio para la comunicación con la EEPROM 93LC66B. </p>
<dl class="section pre"><dt>Precondition</dt><dd>Los pines CS (Chip Select), SK (Clock) y DI (Data In) deben estar configurados como salidas.</dd></dl>
<p>Esta función genera la secuencia de bits necesaria para iniciar una comunicación con la EEPROM 93LC66B. La secuencia consiste en los siguientes pasos:</p><ol type="1">
<li>Se pone CS a bajo (selección del chip).</li>
<li>Se espera 1 microsegundo.</li>
<li>Se pone SK a bajo.</li>
<li>Se pone DI a bajo.</li>
<li>Se pone CS a alto.</li>
<li>Se espera 1 microsegundo.</li>
<li>Se pone DI a alto.</li>
<li>Se espera 1 microsegundo.</li>
<li>Se genera un flanco de subida en SK (SK pasa a alto).</li>
<li>Se espera 1 microsegundo.</li>
<li>Se pone SK a bajo.</li>
<li>Se espera 1 microsegundo.</li>
</ol>
<div class="fragment"><div class="line"><a class="code hl_function" href="#a56aed808a19595c19e58b5eecb06c226">startBit</a>(); <span class="comment">// Inicia la comunicación con la EEPROM.</span></div>
<div class="ttc" id="am93lc66b_8c_html_a56aed808a19595c19e58b5eecb06c226"><div class="ttname"><a href="#a56aed808a19595c19e58b5eecb06c226">startBit</a></div><div class="ttdeci">void startBit(void)</div><div class="ttdoc">Genera la secuencia de bits de inicio para la comunicación con la EEPROM 93LC66B.</div><div class="ttdef"><b>Definition</b> <a href="m93lc66b_8c_source.html#l00034">m93lc66b.c:34</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>La precisión de los retardos depende de la frecuencia del oscilador del microcontrolador. Asegúrese de que la macro <code>__delay_us()</code> esté configurada correctamente para su configuración de hardware.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Esta secuencia de bits es específica para la EEPROM 93LC66B y debe consultarse la hoja de datos para verificar los tiempos y la secuencia exacta. Un error en esta secuencia impedirá la correcta comunicación con la EEPROM. </dd></dl>

<p class="definition">Definition at line <a class="el" href="m93lc66b_8c_source.html#l00034">34</a> of file <a class="el" href="m93lc66b_8c_source.html">m93lc66b.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
