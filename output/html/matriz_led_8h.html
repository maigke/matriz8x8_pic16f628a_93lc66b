<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Matriz_3a: D:/Documentos/Proyectos/MPLABXPic/Matriz_1/Matriz_3a.X/matrizLed.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Matriz_3a
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_275089585c7fc1b5fd5d7d42c69cb1da.html">D:</a></li><li class="navelem"><a class="el" href="dir_0a15cee1de17d9175539557a1b7c24fa.html">Documentos</a></li><li class="navelem"><a class="el" href="dir_6fb0c6de73ebd1c912e1294b94a47638.html">Proyectos</a></li><li class="navelem"><a class="el" href="dir_88ab38d80be61e05cd009b1bea99bb0b.html">MPLABXPic</a></li><li class="navelem"><a class="el" href="dir_e58b7112985ee6bc0673a20bbbb01f03.html">Matriz_1</a></li><li class="navelem"><a class="el" href="dir_13df509c2e2b9f0301b062db03c497d7.html">Matriz_3a.X</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">matrizLed.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;xc.h&gt;</code><br />
<code>#include &quot;<a class="el" href="m93lc66b_8h_source.html">m93lc66b.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="h595_8h_source.html">h595.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rs232_8h_source.html">rs232.h</a>&quot;</code><br />
</div>
<p><a href="matriz_led_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a68c65d618634dad41056b3c71d2d671a" id="r_a68c65d618634dad41056b3c71d2d671a"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a68c65d618634dad41056b3c71d2d671a">buscaDirEEPROM</a> (char dat)</td></tr>
<tr class="memdesc:a68c65d618634dad41056b3c71d2d671a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado un carácter específico.  <br /></td></tr>
<tr class="separator:a68c65d618634dad41056b3c71d2d671a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09a6494fbd8de7d63c29f920bb500965" id="r_a09a6494fbd8de7d63c29f920bb500965"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09a6494fbd8de7d63c29f920bb500965">printCad93LC66B</a> (const char *cad)</td></tr>
<tr class="memdesc:a09a6494fbd8de7d63c29f920bb500965"><td class="mdescLeft">&#160;</td><td class="mdescRight">Muestra una cadena de caracteres en un display utilizando datos almacenados en la EEPROM 93LC66B.  <br /></td></tr>
<tr class="separator:a09a6494fbd8de7d63c29f920bb500965"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a68c65d618634dad41056b3c71d2d671a" name="a68c65d618634dad41056b3c71d2d671a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68c65d618634dad41056b3c71d2d671a">&#9670;&#160;</a></span>buscaDirEEPROM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int buscaDirEEPROM </td>
          <td>(</td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>dat</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado un carácter específico. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dat</td><td>Carácter que se va a buscar en la EEPROM.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>Los módulos de la EEPROM 93LC66B (<code><a class="el" href="m93lc66b_8h.html">m93lc66b.h</a></code>), los registros de desplazamiento (<code><a class="el" href="h595_8h.html">h595.h</a></code>) y la comunicación RS-232 (<code><a class="el" href="rs232_8h.html">rs232.h</a></code>) deben haber sido inicializados correctamente. <code>NUM_OF_CHARACTERS</code> debe estar definido como el número total de caracteres almacenados en la EEPROM. Se asume que los caracteres están almacenados en palabras de 16 bits, donde solo se utiliza el byte menos significativo (LSB). Los datos deben estar almacenados en direcciones multiplos de 10.</dd></dl>
<p>Esta función busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado el carácter <code>dat</code>. Realiza una búsqueda lineal en la EEPROM, leyendo palabras de 16 bits desde direcciones que son múltiplos de 10. Extrae el byte menos significativo (LSB) de cada palabra leída y lo compara con el carácter <code>dat</code>. Si se encuentra una coincidencia, la función retorna la dirección correspondiente.</p>
<p>El proceso es el siguiente:</p><ol type="1">
<li>Se inicializa un bucle <code>for</code> que itera desde 0 hasta <code>NUM_OF_CHARACTERS - 1</code>.</li>
<li>En cada iteración: a. Se calcula la dirección de memoria actual como <code>10 * i</code>. b. Se lee una palabra de 16 bits desde la dirección calculada utilizando la función <code><a class="el" href="m93lc66b_8c.html#a6a0f79bb2ebee4a3da56cd1f790f3240" title="Lee una palabra de 16 bits desde una dirección específica de la EEPROM 93LC66B.">lee93LC66B()</a></code>. c. Se extrae el byte menos significativo (LSB) de la palabra leída utilizando una máscara AND (<code>&amp; 0x00FF</code>). d. Se compara el LSB extraído con el carácter <code>dat</code>. e. Si hay una coincidencia, se retorna la dirección actual (<code>10 * i</code>).</li>
<li>Si no se encuentra ninguna coincidencia después de iterar sobre todos los caracteres almacenados, la función retorna 5.</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>Un valor entero sin signo de 16 bits (<code>unsigned int</code>) que representa la dirección de la EEPROM donde se encontró el carácter <code>dat</code>. Si no se encuentra el carácter, retorna 5.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> charToFind = <span class="charliteral">&#39;X&#39;</span>;</div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> address = <a class="code hl_function" href="matriz_led_8c.html#a68c65d618634dad41056b3c71d2d671a">buscaDirEEPROM</a>(charToFind);</div>
<div class="line"><span class="keywordflow">if</span> (address != 5) {</div>
<div class="line">    <span class="comment">// Se encontró el carácter en la dirección 'address&#39;.</span></div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">// No se encontró el carácter.</span></div>
<div class="line">}</div>
<div class="ttc" id="amatriz_led_8c_html_a68c65d618634dad41056b3c71d2d671a"><div class="ttname"><a href="matriz_led_8c.html#a68c65d618634dad41056b3c71d2d671a">buscaDirEEPROM</a></div><div class="ttdeci">unsigned int buscaDirEEPROM(char dat)</div><div class="ttdoc">Busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado un carácter específico.</div><div class="ttdef"><b>Definition</b> <a href="matriz_led_8c_source.html#l00003">matrizLed.c:3</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>El valor de retorno 5 en caso de no encontrar el carácter es arbitrario y podría ser modificado. Es importante que este valor sea un valor que no corresponda a una dirección válida de la EEPROM, para poder diferenciar entre una dirección válida y un error de búsqueda.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Esta función asume que los caracteres están almacenados en el byte menos significativo (LSB) de palabras de 16 bits en la EEPROM y que las direcciones de almacenamiento son multiplos de 10. Consultar la hoja de datos de la 93LC66B para obtener información precisa sobre la organización de la memoria y el protocolo de comunicación. </dd></dl>

<p class="definition">Definition at line <a class="el" href="matriz_led_8c_source.html#l00003">3</a> of file <a class="el" href="matriz_led_8c_source.html">matrizLed.c</a>.</p>

</div>
</div>
<a id="a09a6494fbd8de7d63c29f920bb500965" name="a09a6494fbd8de7d63c29f920bb500965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09a6494fbd8de7d63c29f920bb500965">&#9670;&#160;</a></span>printCad93LC66B()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printCad93LC66B </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>cad</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Muestra una cadena de caracteres en un display utilizando datos almacenados en la EEPROM 93LC66B. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cad</td><td>Puntero constante a la cadena de caracteres que se va a mostrar.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>Los módulos de la EEPROM 93LC66B (<code><a class="el" href="m93lc66b_8h.html">m93lc66b.h</a></code>), los registros de desplazamiento (<code><a class="el" href="h595_8h.html">h595.h</a></code>) y la comunicación RS-232 (<code><a class="el" href="rs232_8h.html">rs232.h</a></code>) deben haber sido inicializados correctamente. <code>NUM_OF_CHARACTERS</code> debe estar definido. La función <code><a class="el" href="#a68c65d618634dad41056b3c71d2d671a" title="Busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado un carácter específico.">buscaDirEEPROM()</a></code> debe estar implementada correctamente. Se asume que los datos en la EEPROM están organizados de la siguiente manera: en la dirección obtenida por <code><a class="el" href="#a68c65d618634dad41056b3c71d2d671a" title="Busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado un carácter específico.">buscaDirEEPROM()</a></code> se almacena el número de patrones (bytes) que definen el carácter, y a partir de la dirección <code>dir + 2</code> se almacenan los patrones de 8 bits.</dd></dl>
<p>Esta función toma una cadena de caracteres y la muestra en un display utilizando datos almacenados en la EEPROM 93LC66B. Por cada carácter en la cadena:</p><ol type="1">
<li>Se busca la dirección en la EEPROM donde se almacenan los datos del carácter utilizando la función <code><a class="el" href="#a68c65d618634dad41056b3c71d2d671a" title="Busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado un carácter específico.">buscaDirEEPROM()</a></code>.</li>
<li>Si se encuentra la dirección (es decir, <code><a class="el" href="#a68c65d618634dad41056b3c71d2d671a" title="Busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado un carácter específico.">buscaDirEEPROM()</a></code> no retorna 5): a. Se lee el número de patrones desde la EEPROM en la dirección obtenida y se guarda en <code>numPatrones</code>. b. Se leen los patrones del carácter desde la EEPROM, a partir de la dirección <code>dir + 2</code>, y se almacenan en el array <code>message</code>. Se leen los datos en pares, asumiendo que cada par representa un patrón. c. Se itera 32 veces para actualizar el display. d. Dentro de este bucle, se itera 8 veces, enviando cada byte del patrón a los registros de desplazamiento usando la función <code><a class="el" href="h595_8c.html#acce54abb2c29fbb46d5ca8b668f6f334" title="Controla dos registros de desplazamiento 74HC595 conectados en cascada.">H595()</a></code> y los valores del array <code>S</code>. Se genera un pequeño retardo entre cada envío.</li>
<li>Se repiten los pasos 1 y 2 para el siguiente carácter de la cadena hasta que se encuentra el carácter nulo ('\0').</li>
</ol>
<div class="fragment"><div class="line"><a class="code hl_function" href="matriz_led_8c.html#a09a6494fbd8de7d63c29f920bb500965">printCad93LC66B</a>(<span class="stringliteral">&quot;Ejemplo&quot;</span>); <span class="comment">// Muestra la cadena &quot;Ejemplo&quot; en el display.</span></div>
<div class="ttc" id="amatriz_led_8c_html_a09a6494fbd8de7d63c29f920bb500965"><div class="ttname"><a href="matriz_led_8c.html#a09a6494fbd8de7d63c29f920bb500965">printCad93LC66B</a></div><div class="ttdeci">void printCad93LC66B(const char *cad)</div><div class="ttdoc">Muestra una cadena de caracteres en un display utilizando datos almacenados en la EEPROM 93LC66B.</div><div class="ttdef"><b>Definition</b> <a href="matriz_led_8c_source.html#l00021">matrizLed.c:21</a></div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>La precisión de los retardos depende de la frecuencia del oscilador del microcontrolador. Asegúrese de que la macro <code>__delay_us()</code> esté configurada correctamente para su configuración de hardware. El tamaño del array <code>message</code> (10) debe ser lo suficientemente grande para almacenar el máximo número de patrones que se puedan leer desde la EEPROM.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Esta función asume una organización específica de los datos en la EEPROM. Consultar la documentación del formato de almacenamiento en la EEPROM para asegurar la compatibilidad. La constante <code>S</code> se utiliza para multiplexar los datos en el display. El valor 5 retornado por <code>buscaDirEEPROM</code> indica que el caracter no se encontro. </dd></dl>

<p class="definition">Definition at line <a class="el" href="matriz_led_8c_source.html#l00021">21</a> of file <a class="el" href="matriz_led_8c_source.html">matrizLed.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
