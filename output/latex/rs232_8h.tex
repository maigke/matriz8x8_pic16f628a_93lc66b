\doxysection{D\+:/\+Documentos/\+Proyectos/\+MPLABXPic/\+Matriz\+\_\+1/\+Matriz\+\_\+3a.X/rs232.h File Reference}
\hypertarget{rs232_8h}{}\label{rs232_8h}\index{D:/Documentos/Proyectos/MPLABXPic/Matriz\_1/Matriz\_3a.X/rs232.h@{D:/Documentos/Proyectos/MPLABXPic/Matriz\_1/Matriz\_3a.X/rs232.h}}
{\ttfamily \#include $<$xc.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{rs232_8h_a5fe65b8effa0a689de95bfd3f9378478}{init\+\_\+rs232}} (void)
\begin{DoxyCompactList}\small\item\em Inicializa el módulo USART (Universal Synchronous Asynchronous Receiver Transmitter) para la comunicación RS-\/232 del PIC16\+F628A. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{rs232_8h_adc7e5368eb7b859260127a82cb20e868}{envia\+RS232}} (unsigned char dat)
\begin{DoxyCompactList}\small\item\em Envía un byte de datos a través del puerto serial RS-\/232. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{rs232_8h_a68eb090a2d18831f34fda63b5a959010}{print\+Cad}} (const char \texorpdfstring{$\ast$}{*}cad)
\begin{DoxyCompactList}\small\item\em Envía una cadena de caracteres a través del puerto serial RS-\/232. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{rs232_8h_aedf232c8781ffb75e6b5cef680e1b04b}{envia\+Hex\+Byte}} (unsigned char byte)
\begin{DoxyCompactList}\small\item\em Envía un byte como dos caracteres hexadecimales a través del puerto serial RS-\/232. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{rs232_8h_aedf232c8781ffb75e6b5cef680e1b04b}\index{rs232.h@{rs232.h}!enviaHexByte@{enviaHexByte}}
\index{enviaHexByte@{enviaHexByte}!rs232.h@{rs232.h}}
\doxysubsubsection{\texorpdfstring{enviaHexByte()}{enviaHexByte()}}
{\footnotesize\ttfamily \label{rs232_8h_aedf232c8781ffb75e6b5cef680e1b04b} 
void envia\+Hex\+Byte (\begin{DoxyParamCaption}\item[{unsigned char}]{byte}{}\end{DoxyParamCaption})}



Envía un byte como dos caracteres hexadecimales a través del puerto serial RS-\/232. 


\begin{DoxyParams}{Parameters}
{\em byte} & Byte que se va a enviar en formato hexadecimal.\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
El módulo USART debe haber sido inicializado previamente con la función {\ttfamily \doxylink{rs232_8h_a5fe65b8effa0a689de95bfd3f9378478}{init\+\_\+rs232()}}.
\end{DoxyPrecond}
Esta función convierte un byte en su representación hexadecimal de dos caracteres y los envía a través del puerto serial RS-\/232. El proceso es el siguiente\+:
\begin{DoxyEnumerate}
\item Se extrae el nibble alto (4 bits más significativos) del byte usando un desplazamiento a la derecha y una máscara AND.
\item Se verifica si el nibble es menor que 10. a. Si es menor que 10, se convierte a su representación ASCII sumándole el código ASCII del carácter \textquotesingle{}0\textquotesingle{}. b. Si es mayor o igual a 10, se convierte a su representación ASCII sumándole el código ASCII del carácter \textquotesingle{}A\textquotesingle{} y restándole 10.
\item Se envía el carácter resultante a través de la función {\ttfamily \doxylink{rs232_8h_adc7e5368eb7b859260127a82cb20e868}{envia\+RS232()}}.
\item Se repiten los pasos 1-\/3 para el nibble bajo (4 bits menos significativos) del byte.
\end{DoxyEnumerate}


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ myByte\ =\ 0xAF;}
\DoxyCodeLine{\mbox{\hyperlink{rs232_8c_aedf232c8781ffb75e6b5cef680e1b04b}{enviaHexByte}}(myByte);\ \textcolor{comment}{//\ Envía los\ caracteres\ 'A'\ y\ 'F'\ a\ través del\ puerto\ serial.}}

\end{DoxyCode}


\begin{DoxyNote}{Note}
Esta función depende de la función {\ttfamily \doxylink{rs232_8h_adc7e5368eb7b859260127a82cb20e868}{envia\+RS232()}}, que tiene un comportamiento bloqueante. Por lo tanto, {\ttfamily \doxylink{rs232_8h_aedf232c8781ffb75e6b5cef680e1b04b}{envia\+Hex\+Byte()}} también bloqueará la ejecución del programa hasta que se hayan enviado los dos caracteres.
\end{DoxyNote}
\begin{DoxyRemark}{Remarks}
Esta función utiliza caracteres ASCII \textquotesingle{}0\textquotesingle{}-\/\textquotesingle{}9\textquotesingle{} y \textquotesingle{}A\textquotesingle{}-\/\textquotesingle{}F\textquotesingle{} para representar los valores hexadecimales. 
\end{DoxyRemark}


Definition at line \mbox{\hyperlink{rs232_8c_source_l00029}{29}} of file \mbox{\hyperlink{rs232_8c_source}{rs232.\+c}}.

\Hypertarget{rs232_8h_adc7e5368eb7b859260127a82cb20e868}\index{rs232.h@{rs232.h}!enviaRS232@{enviaRS232}}
\index{enviaRS232@{enviaRS232}!rs232.h@{rs232.h}}
\doxysubsubsection{\texorpdfstring{enviaRS232()}{enviaRS232()}}
{\footnotesize\ttfamily \label{rs232_8h_adc7e5368eb7b859260127a82cb20e868} 
void envia\+RS232 (\begin{DoxyParamCaption}\item[{unsigned char}]{dat}{}\end{DoxyParamCaption})}



Envía un byte de datos a través del puerto serial RS-\/232. 


\begin{DoxyParams}{Parameters}
{\em dat} & Byte de datos que se va a enviar.\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
El módulo USART debe haber sido inicializado previamente con la función {\ttfamily \doxylink{rs232_8h_a5fe65b8effa0a689de95bfd3f9378478}{init\+\_\+rs232()}}.
\end{DoxyPrecond}
Esta función envía un byte de datos a través del puerto serial RS-\/232. Utiliza el registro {\ttfamily TXREG} para transmitir los datos y el bit {\ttfamily TRMT} (Transmit Shift Register Empty) del registro {\ttfamily TXSTA} para verificar si el buffer de transmisión está vacío antes de enviar un nuevo byte. El proceso es el siguiente\+:
\begin{DoxyEnumerate}
\item Se entra en un bucle {\ttfamily while} que espera a que el bit {\ttfamily TRMT} esté a 1. Esto indica que el buffer de transmisión está vacío y listo para recibir un nuevo dato.
\item Una vez que el buffer está vacío, se escribe el byte de datos {\ttfamily dat} en el registro {\ttfamily TXREG}. Esto inicia la transmisión del dato.
\end{DoxyEnumerate}


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{rs232_8c_adc7e5368eb7b859260127a82cb20e868}{enviaRS232}}(\textcolor{charliteral}{'A'});\ \textcolor{comment}{//\ Envía el\ carácter\ 'A'.}}
\DoxyCodeLine{\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ myByte\ =\ 0x42;}
\DoxyCodeLine{\mbox{\hyperlink{rs232_8c_adc7e5368eb7b859260127a82cb20e868}{enviaRS232}}(myByte);\ \textcolor{comment}{//\ Envía el\ byte\ 0x42.}}

\end{DoxyCode}


\begin{DoxyNote}{Note}
Esta función bloquea la ejecución del programa hasta que el buffer de transmisión esté vacío. Si se necesita un manejo no bloqueante, se deben utilizar interrupciones o un enfoque diferente.
\end{DoxyNote}
\begin{DoxyRemark}{Remarks}
Es importante asegurarse de que el dispositivo receptor esté configurado con la misma velocidad de baudios y otros parámetros de comunicación (bits de datos, paridad, bits de stop) que el transmisor. 
\end{DoxyRemark}


Definition at line \mbox{\hyperlink{rs232_8c_source_l00014}{14}} of file \mbox{\hyperlink{rs232_8c_source}{rs232.\+c}}.

\Hypertarget{rs232_8h_a5fe65b8effa0a689de95bfd3f9378478}\index{rs232.h@{rs232.h}!init\_rs232@{init\_rs232}}
\index{init\_rs232@{init\_rs232}!rs232.h@{rs232.h}}
\doxysubsubsection{\texorpdfstring{init\_rs232()}{init\_rs232()}}
{\footnotesize\ttfamily \label{rs232_8h_a5fe65b8effa0a689de95bfd3f9378478} 
void init\+\_\+rs232 (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Inicializa el módulo USART (Universal Synchronous Asynchronous Receiver Transmitter) para la comunicación RS-\/232 del PIC16\+F628A. 

\begin{DoxyPrecond}{Precondition}
Ninguna.
\end{DoxyPrecond}
Esta función configura el módulo USART del microcontrolador para la comunicación asíncrona RS-\/232 a una velocidad de 9600 bps. Realiza las siguientes configuraciones\+:
\begin{DoxyEnumerate}
\item Configura el registro {\ttfamily SPBRG} para la velocidad de baudios de 9600 bps.
\item Configura el registro {\ttfamily TXSTA} para habilitar la transmisión asíncrona.
\item Configura el registro {\ttfamily RCSTA} para habilitar la recepción asíncrona.
\item Configura el pin RB1 como entrada (RX) y el pin RB2 como salida (TX).
\end{DoxyEnumerate}


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{rs232_8c_a5fe65b8effa0a689de95bfd3f9378478}{init\_rs232}}();\ \textcolor{comment}{//\ Inicializa\ la\ comunicación RS-\/232\ a\ 9600\ bps.}}

\end{DoxyCode}


\begin{DoxyNote}{Note}
El valor de {\ttfamily SPBRG} (0x19) está calculado para una frecuencia de oscilador específica. Si la frecuencia del oscilador es diferente, este valor debe recalcularse. Consultar la hoja de datos del microcontrolador para obtener la fórmula de cálculo y los valores correspondientes.
\end{DoxyNote}
\begin{DoxyRemark}{Remarks}
Esta configuración asume un modo de 8 bits de datos, sin paridad y 1 bit de stop. Para configuraciones diferentes (por ejemplo, con paridad), se deben modificar los registros {\ttfamily TXSTA} y {\ttfamily RCSTA} según la hoja de datos del microcontrolador. 
\end{DoxyRemark}


Definition at line \mbox{\hyperlink{rs232_8c_source_l00003}{3}} of file \mbox{\hyperlink{rs232_8c_source}{rs232.\+c}}.

\Hypertarget{rs232_8h_a68eb090a2d18831f34fda63b5a959010}\index{rs232.h@{rs232.h}!printCad@{printCad}}
\index{printCad@{printCad}!rs232.h@{rs232.h}}
\doxysubsubsection{\texorpdfstring{printCad()}{printCad()}}
{\footnotesize\ttfamily \label{rs232_8h_a68eb090a2d18831f34fda63b5a959010} 
void print\+Cad (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{cad}{}\end{DoxyParamCaption})}



Envía una cadena de caracteres a través del puerto serial RS-\/232. 


\begin{DoxyParams}{Parameters}
{\em cad} & Puntero constante a la cadena de caracteres que se va a enviar.\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
El módulo USART debe haber sido inicializado previamente con la función {\ttfamily \doxylink{rs232_8h_a5fe65b8effa0a689de95bfd3f9378478}{init\+\_\+rs232()}}.
\end{DoxyPrecond}
Esta función envía una cadena de caracteres terminada en nulo a través del puerto serial RS-\/232. Itera sobre la cadena carácter por carácter, utilizando la función {\ttfamily \doxylink{rs232_8h_adc7e5368eb7b859260127a82cb20e868}{envia\+RS232()}} para enviar cada carácter individualmente. El bucle continúa hasta que se encuentra el carácter nulo (\textquotesingle{}\textbackslash{}0\textquotesingle{}), que marca el final de la cadena.


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{rs232_8c_a68eb090a2d18831f34fda63b5a959010}{printCad}}(\textcolor{stringliteral}{"{}Hola\ Mundo!"{}});\ \textcolor{comment}{//\ Envía la\ cadena\ "{}Hola\ Mundo!"{}.}}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ myString[]\ =\ \textcolor{stringliteral}{"{}Otro\ ejemplo"{}};}
\DoxyCodeLine{\mbox{\hyperlink{rs232_8c_a68eb090a2d18831f34fda63b5a959010}{printCad}}(myString);\ \textcolor{comment}{//\ Envía la\ cadena\ "{}Otro\ ejemplo"{}.}}

\end{DoxyCode}


\begin{DoxyNote}{Note}
Esta función depende de la función {\ttfamily \doxylink{rs232_8h_adc7e5368eb7b859260127a82cb20e868}{envia\+RS232()}}, que tiene un comportamiento bloqueante. Por lo tanto, {\ttfamily \doxylink{rs232_8h_a68eb090a2d18831f34fda63b5a959010}{print\+Cad()}} también bloqueará la ejecución del programa hasta que se haya enviado toda la cadena.
\end{DoxyNote}
\begin{DoxyRemark}{Remarks}
Es importante asegurarse de que la cadena {\ttfamily cad} esté correctamente terminada en nulo. De lo contrario, la función podría intentar leer más allá del final de la cadena, lo que podría provocar un comportamiento indefinido. 
\end{DoxyRemark}


Definition at line \mbox{\hyperlink{rs232_8c_source_l00020}{20}} of file \mbox{\hyperlink{rs232_8c_source}{rs232.\+c}}.

