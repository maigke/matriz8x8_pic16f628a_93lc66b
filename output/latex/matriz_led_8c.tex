\doxysection{D\+:/\+Documentos/\+Proyectos/\+MPLABXPic/\+Matriz\+\_\+1/\+Matriz\+\_\+3a.X/matriz\+Led.c File Reference}
\hypertarget{matriz_led_8c}{}\label{matriz_led_8c}\index{D:/Documentos/Proyectos/MPLABXPic/Matriz\_1/Matriz\_3a.X/matrizLed.c@{D:/Documentos/Proyectos/MPLABXPic/Matriz\_1/Matriz\_3a.X/matrizLed.c}}
{\ttfamily \#include "{}matriz\+Led.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
unsigned int \mbox{\hyperlink{matriz_led_8c_a68c65d618634dad41056b3c71d2d671a}{busca\+Dir\+EEPROM}} (char dat)
\begin{DoxyCompactList}\small\item\em Busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado un carácter específico. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{matriz_led_8c_a09a6494fbd8de7d63c29f920bb500965}{print\+Cad93\+LC66B}} (const char \texorpdfstring{$\ast$}{*}cad)
\begin{DoxyCompactList}\small\item\em Muestra una cadena de caracteres en un display utilizando datos almacenados en la EEPROM 93LC66B. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{matriz_led_8c_a68c65d618634dad41056b3c71d2d671a}\index{matrizLed.c@{matrizLed.c}!buscaDirEEPROM@{buscaDirEEPROM}}
\index{buscaDirEEPROM@{buscaDirEEPROM}!matrizLed.c@{matrizLed.c}}
\doxysubsubsection{\texorpdfstring{buscaDirEEPROM()}{buscaDirEEPROM()}}
{\footnotesize\ttfamily \label{matriz_led_8c_a68c65d618634dad41056b3c71d2d671a} 
unsigned int busca\+Dir\+EEPROM (\begin{DoxyParamCaption}\item[{char}]{dat}{}\end{DoxyParamCaption})}



Busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado un carácter específico. 


\begin{DoxyParams}{Parameters}
{\em dat} & Carácter que se va a buscar en la EEPROM.\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
Los módulos de la EEPROM 93LC66B ({\ttfamily \doxylink{m93lc66b_8h}{m93lc66b.\+h}}), los registros de desplazamiento ({\ttfamily \doxylink{h595_8h}{h595.\+h}}) y la comunicación RS-\/232 ({\ttfamily \doxylink{rs232_8h}{rs232.\+h}}) deben haber sido inicializados correctamente. {\ttfamily NUM\+\_\+\+OF\+\_\+\+CHARACTERS} debe estar definido como el número total de caracteres almacenados en la EEPROM. Se asume que los caracteres están almacenados en palabras de 16 bits, donde solo se utiliza el byte menos significativo (LSB). Los datos deben estar almacenados en direcciones multiplos de 10.
\end{DoxyPrecond}
Esta función busca la dirección en la EEPROM 93LC66B donde se encuentra almacenado el carácter {\ttfamily dat}. Realiza una búsqueda lineal en la EEPROM, leyendo palabras de 16 bits desde direcciones que son múltiplos de 10. Extrae el byte menos significativo (LSB) de cada palabra leída y lo compara con el carácter {\ttfamily dat}. Si se encuentra una coincidencia, la función retorna la dirección correspondiente.

El proceso es el siguiente\+:
\begin{DoxyEnumerate}
\item Se inicializa un bucle {\ttfamily for} que itera desde 0 hasta {\ttfamily NUM\+\_\+\+OF\+\_\+\+CHARACTERS -\/ 1}.
\item En cada iteración\+: a. Se calcula la dirección de memoria actual como {\ttfamily 10 \texorpdfstring{$\ast$}{*} i}. b. Se lee una palabra de 16 bits desde la dirección calculada utilizando la función {\ttfamily \doxylink{m93lc66b_8c_a6a0f79bb2ebee4a3da56cd1f790f3240}{lee93\+LC66\+B()}}. c. Se extrae el byte menos significativo (LSB) de la palabra leída utilizando una máscara AND ({\ttfamily \& 0x00\+FF}). d. Se compara el LSB extraído con el carácter {\ttfamily dat}. e. Si hay una coincidencia, se retorna la dirección actual ({\ttfamily 10 \texorpdfstring{$\ast$}{*} i}).
\item Si no se encuentra ninguna coincidencia después de iterar sobre todos los caracteres almacenados, la función retorna 5.
\end{DoxyEnumerate}

\begin{DoxyReturn}{Returns}
Un valor entero sin signo de 16 bits ({\ttfamily unsigned int}) que representa la dirección de la EEPROM donde se encontró el carácter {\ttfamily dat}. Si no se encuentra el carácter, retorna 5.
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{char}\ charToFind\ =\ \textcolor{charliteral}{'X'};}
\DoxyCodeLine{\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ address\ =\ \mbox{\hyperlink{matriz_led_8c_a68c65d618634dad41056b3c71d2d671a}{buscaDirEEPROM}}(charToFind);}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (address\ !=\ 5)\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Se\ encontró el\ carácter\ en\ la\ dirección 'address'.}}
\DoxyCodeLine{\}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ No\ se\ encontró el\ carácter.}}
\DoxyCodeLine{\}}

\end{DoxyCode}


\begin{DoxyNote}{Note}
El valor de retorno 5 en caso de no encontrar el carácter es arbitrario y podría ser modificado. Es importante que este valor sea un valor que no corresponda a una dirección válida de la EEPROM, para poder diferenciar entre una dirección válida y un error de búsqueda.
\end{DoxyNote}
\begin{DoxyRemark}{Remarks}
Esta función asume que los caracteres están almacenados en el byte menos significativo (LSB) de palabras de 16 bits en la EEPROM y que las direcciones de almacenamiento son multiplos de 10. Consultar la hoja de datos de la 93LC66B para obtener información precisa sobre la organización de la memoria y el protocolo de comunicación. 
\end{DoxyRemark}


Definition at line \mbox{\hyperlink{matriz_led_8c_source_l00003}{3}} of file \mbox{\hyperlink{matriz_led_8c_source}{matriz\+Led.\+c}}.

\Hypertarget{matriz_led_8c_a09a6494fbd8de7d63c29f920bb500965}\index{matrizLed.c@{matrizLed.c}!printCad93LC66B@{printCad93LC66B}}
\index{printCad93LC66B@{printCad93LC66B}!matrizLed.c@{matrizLed.c}}
\doxysubsubsection{\texorpdfstring{printCad93LC66B()}{printCad93LC66B()}}
{\footnotesize\ttfamily \label{matriz_led_8c_a09a6494fbd8de7d63c29f920bb500965} 
void print\+Cad93\+LC66B (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{cad}{}\end{DoxyParamCaption})}



Muestra una cadena de caracteres en un display utilizando datos almacenados en la EEPROM 93LC66B. 


\begin{DoxyParams}{Parameters}
{\em cad} & Puntero constante a la cadena de caracteres que se va a mostrar.\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
Los módulos de la EEPROM 93LC66B ({\ttfamily \doxylink{m93lc66b_8h}{m93lc66b.\+h}}), los registros de desplazamiento ({\ttfamily \doxylink{h595_8h}{h595.\+h}}) y la comunicación RS-\/232 ({\ttfamily \doxylink{rs232_8h}{rs232.\+h}}) deben haber sido inicializados correctamente. {\ttfamily NUM\+\_\+\+OF\+\_\+\+CHARACTERS} debe estar definido. La función {\ttfamily \doxylink{matriz_led_8h_a68c65d618634dad41056b3c71d2d671a}{busca\+Dir\+EEPROM()}} debe estar implementada correctamente. Se asume que los datos en la EEPROM están organizados de la siguiente manera\+: en la dirección obtenida por {\ttfamily \doxylink{matriz_led_8h_a68c65d618634dad41056b3c71d2d671a}{busca\+Dir\+EEPROM()}} se almacena el número de patrones (bytes) que definen el carácter, y a partir de la dirección {\ttfamily dir + 2} se almacenan los patrones de 8 bits.
\end{DoxyPrecond}
Esta función toma una cadena de caracteres y la muestra en un display utilizando datos almacenados en la EEPROM 93LC66B. Por cada carácter en la cadena\+:
\begin{DoxyEnumerate}
\item Se busca la dirección en la EEPROM donde se almacenan los datos del carácter utilizando la función {\ttfamily \doxylink{matriz_led_8h_a68c65d618634dad41056b3c71d2d671a}{busca\+Dir\+EEPROM()}}.
\item Si se encuentra la dirección (es decir, {\ttfamily \doxylink{matriz_led_8h_a68c65d618634dad41056b3c71d2d671a}{busca\+Dir\+EEPROM()}} no retorna 5)\+: a. Se lee el número de patrones desde la EEPROM en la dirección obtenida y se guarda en {\ttfamily num\+Patrones}. b. Se leen los patrones del carácter desde la EEPROM, a partir de la dirección {\ttfamily dir + 2}, y se almacenan en el array {\ttfamily message}. Se leen los datos en pares, asumiendo que cada par representa un patrón. c. Se itera 32 veces para actualizar el display. d. Dentro de este bucle, se itera 8 veces, enviando cada byte del patrón a los registros de desplazamiento usando la función {\ttfamily \doxylink{h595_8c_acce54abb2c29fbb46d5ca8b668f6f334}{H595()}} y los valores del array {\ttfamily S}. Se genera un pequeño retardo entre cada envío.
\item Se repiten los pasos 1 y 2 para el siguiente carácter de la cadena hasta que se encuentra el carácter nulo (\textquotesingle{}\textbackslash{}0\textquotesingle{}).
\end{DoxyEnumerate}


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{matriz_led_8c_a09a6494fbd8de7d63c29f920bb500965}{printCad93LC66B}}(\textcolor{stringliteral}{"{}Ejemplo"{}});\ \textcolor{comment}{//\ Muestra\ la\ cadena\ "{}Ejemplo"{}\ en\ el\ display.}}

\end{DoxyCode}


\begin{DoxyNote}{Note}
La precisión de los retardos depende de la frecuencia del oscilador del microcontrolador. Asegúrese de que la macro {\ttfamily \+\_\+\+\_\+delay\+\_\+us()} esté configurada correctamente para su configuración de hardware. El tamaño del array {\ttfamily message} (10) debe ser lo suficientemente grande para almacenar el máximo número de patrones que se puedan leer desde la EEPROM.
\end{DoxyNote}
\begin{DoxyRemark}{Remarks}
Esta función asume una organización específica de los datos en la EEPROM. Consultar la documentación del formato de almacenamiento en la EEPROM para asegurar la compatibilidad. La constante {\ttfamily S} se utiliza para multiplexar los datos en el display. El valor 5 retornado por {\ttfamily busca\+Dir\+EEPROM} indica que el caracter no se encontro. 
\end{DoxyRemark}


Definition at line \mbox{\hyperlink{matriz_led_8c_source_l00021}{21}} of file \mbox{\hyperlink{matriz_led_8c_source}{matriz\+Led.\+c}}.

